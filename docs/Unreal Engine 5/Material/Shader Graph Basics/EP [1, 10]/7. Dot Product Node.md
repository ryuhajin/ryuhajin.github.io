---
layout: default
title: "7. Dot Product Node"
parent: "EP [1, 10]"
nav_order: 4
---

# EP 7 : Dot Product Node

## Dot Product 노드의 수학적 원리
Dot Product 노드는 두 개의 벡터(Vector3) 를 입력으로 받는다

내부적으로는 이렇게 동작한다
1. 각 벡터의 x·y·z 성분을 곱한다
- (x₁ × x₂, y₁ × y₂, z₁ × z₂)
2. 그 결과들을 모두 더한다.
- (x₁x₂ + y₁y₂ + z₁z₂)

즉, **성분별 곱 후 합산 = 내적(dot product)**

GPU에는 이 연산이 하드웨어 수준에서 최적화돼 있어서, 직접 곱셈/덧셈 노드로 구현하는 것보다 Dot Product 노드 하나를 쓰는 게 훨씬 빠름

---

## Dot Product 노드 사용 예제

### 예제 1: 그레이스케일 변환
컬러 텍스처(RGB)를 회색조로 바꾸려면, 단순히 `(R+G+B)/3` 하면 되지 않을까 싶지만, **사람 눈은 녹색(G)에 훨씬 민감하다**

- 따라서 다음과 같은 가중치 벡터를 사용한다

```
(0.2126, 0.7152, 0.0722)
```

위 벡터와 텍스처 RGB 값을 dot product 하면, 사람이 보기에 자연스러운 흑백 이미지가 나옴
- 즉, **Grayscale = (R × 0.2126) + (G × 0.7152) + (B × 0.0722)**

---

### 예제 2: 마스크 채널 선택
텍스처의 R, G, B, A 채널에 서로 다른 데이터를 넣어두고 Dot Product를 활용해 채널 뽑아내기

(Texture) Dot Product (V4) 를 이용해, 원하는 채널만 뽑아내기

- 예: V4 (1,0,0,0) → Red 채널만 출력
- 예: V4 (0,1,0,0) → Green 채널만 출력
- 예: V4 (0,0,0,1) → Alpha 채널 출력

즉, Dot Product = “마스크 채널 셀렉터”로 활용 가능

---

### 예제 3: 조명/프레넬 효과
- 법선 벡터(Normal) = 표면이 바라보는 방향
- 뷰 벡터(View direction) = 카메라가 바라보는 방향

이 둘을 Dot Product 하면
- 두 벡터가 평행(같은 방향) → 값이 1 (밝음)
- 두 벡터가 수직 → 값이 0 (어두움)
- 두 벡터가 반대 방향 → 값이 −1 (빛을 전혀 받지 않음)

결과적으로, 표면이 카메라/빛을 얼마나 정면으로 향하는지 알 수 있음

---

# Dot Product (내적) 정리

## 1. 내적의 정의

### (1) 성분 곱의 합

$$A · B = Ax * Bx + Ay * By + Az * Bz$$

### (2) 길이와 각도를 이용한 정의

$$A · B = |A| * |B| * cos(θ)$$

- A, B : 각 벡터의 크기(길이)
- θ : 두 벡터 사이의 각도

---

## 2. 두 정의가 같은 이유
- 좌표 성분 곱의 합과 삼각법을 이용한 길이·각도 표현은 동일한 결과를 준다
- 즉, 내적은 **성분 곱의 합**과 **길이 × cosθ** 두 가지로 해석 가능하다

---

## 3. 내적 값과 각도의 관계
보통 Shader에서는 벡터를 정규화하여 `|A|=|B|= 1` → 내적 = `cosθ`

- θ = 0° (같은 방향) → cosθ = 1 → 내적 = 1
- θ = 90° (수직) → cosθ = 0 → 내적 = 0
- θ = 180° (정반대) → cosθ = -1 → 내적 = -1

→ **내적 값 = 두 벡터의 방향 유사도**

---

## 4. Shader에서의 활용 예시
- Normal · Light → 표면이 빛을 얼마나 정면으로 받는지 (Lambert 조명)
- Normal · View → 카메라와 표면의 정면성 (Fresnel, Rim Light 효과)
- Color · Weight Vector → RGB 가중합으로 Grayscale 변환

---

## 5. 핵심 직관
> 내적 = 두 벡터가 얼마나 같은 방향을 보고 있는가를 수치화  
> Shader에서는 normalize/saturate로 보정해 **0~1 값**으로 활용 → 밝기, 마스크, 효과 연산

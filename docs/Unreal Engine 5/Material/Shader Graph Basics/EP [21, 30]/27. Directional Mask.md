---
layout: default
title: "27. Directional Mask"
parent: "EP [21, 30]"
nav_order: 7
---

# EP 27 : Directional Mask
월드 공간 위치를 이용해 텍스처 투영을 사용했을 때, 투영 방향과 수직인 면에서 텍스처가 길게 늘어지는 단점이 있음

- 방향 마스크는 이 문제를 해결하기 위한 기술

## 핵심 아이디어
**법선 벡터(Normal)의 방향을 기반으로 마스크를 만들어, 특정 방향으로 투영된 텍스처만 보이게 한다**

- 투영 방향과 수직인 영역은 마스킹으로 감춤

---

## 그래프 예제

1. `Vertex Normal WS` 노드 가져오기
2. Normal 벡터는 + 방향과 - 방향을 가지므로 → `abs` 노드로 모두 양수로 변환
    - 마스크로 쓸 땐 음수값이 불필요
    - **위/아래, 앞/뒤, 좌/우 방향을 각각 하나의 채널로 다룰 수 있게 됨**
3. `Power` 노드로 대비 높이기
    - power 처리한 하면 r/g/b 채널 마스크 사이에 빈 검정 공간이 생김 (마스크가 만나지 않는 경계)
    - Power 값 조절로 마스크 경계를 조절
4. 위 경계를 채우기 위해 `Dot Product (power, (1,1,1))`
    - 각 방향의 세기 합산 → R+G+B의 총합 (하나의 흑백 값(전체 밝기)으로 만드는 과정)
    - 흰색(1): 어떤 방향이든 강하게 기여
    - 검정(0): 빈 영역
5. `Divide (Power / DotProduct)`
    - Power를 거친 원래의 컬러 값(RGB)을 위에서 계산한 전체 밝기 값으로 나누어 줌
    - 각 방향을 정규화 → 마스크가 서로 딱 맞물려 경계 없이 꽉 채움
6. `Split`로 방향별 마스크 분리
7. 이렇게 만들어진 마스크와 Projected Texture를 곱함

```
Top에서 투영했으면 → Blue 마스크 사용

Side에서 투영했으면 → Green 마스크 사용

Front에서 투영했으면 → Red 마스크 사용
```


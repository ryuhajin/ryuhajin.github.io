---
layout: default
title: "7. rain on screen"
parent: "Post Process Material"
nav_order: 7
---

# 7. rain on screen
화면에 비 내리는 효과 만들기

---

## Aspect Ratio (종횡비 계산)
화면의 **가로/세로 비율(W/H)**. 셰이더에서는 **UV 왜곡이나 픽셀 보정을 위해 씀**

```
종횡비 = 가로 길이 / 세로 길이
```

### UV 공간 vs 실제 화면
1. **UV 공간은 0–1 범위의 정사각형 좌표계**
    - 항상 1×1 기준으로 계산
2. **실제 화면은 예를 들어 1920×1080처럼 가로/세로 비율이 다른 직사각형**
    - 즉, UV의 (0.5,0.5)는 항상 화면 중심이지만
    - (0.1, 0.1)만큼 이동한 **실제 거리(px)는 가로축과 세로축에서 길이가 다름**

> 종횡비(aspect ratio = width / height)는 이 불균형을 보정하는 계수
> - 이를 곱하거나 나눠서 UV 공간에서의 연산이 화면에서 시각적으로 올바르게 보이게 만든다

---

## 사용 방식
언리얼, 유니티 대부분은 **세로를 1 기준으로 가로를 종횡비와 곱하는 방식을 쓴다**

---

### 1. 왜곡, 회전, 렌즈 효과 보정
중앙 기준 왜곡 시 가로/세로 스케일이 맞아 떨어져 원형 유지

```
화면이 1920×1080이라면 aspect = 1920 / 1080 = 1.777…

float2 uv = TexCoord - 0.5;
uv.x *= AspectRatio;   // 비율 보정

// 이후 렌즈 왜곡, 회전, 노이즈 등 수행

uv.x /= AspectRatio;   // 다시 원상복귀
uv += 0.5;
```

- 원형 마스크가 실제 화면에서도 원형으로 유지됨
- 보정하지 않으면 타원형으로 찌그러짐

### 2. 화면 방향 블러, 파티클, 스크린 리플 등
- 블러 커널이나 리플 오프셋을 `1/Resolution`로 곱할 때
- 종횡비가 다르면 수평/수직 번짐량이 다르므로 **offset.x *= AspectRatio 로 보정**

---


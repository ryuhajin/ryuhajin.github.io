---
layout: default
title: "2. Scene Texture"
parent: "Post Process Material"
nav_order: 2
---

# 2. Scene Texture
렌더링 파이프라인 읽어오기. 색상, 깊이, 법선 등 특정 정보 샘플링

- Scene texture ID 선택 가능

---

## Scene texture ID
씬 텍스쳐 ID 종류

---

### SceneColor
Tonemapping 전 또는 후의 최종 장면 색 버퍼

- **데이터 타입**: HDR (Tone Mapping 이전), LDR (Tone Mapping 이후)

```
⚠️ 어떤 시점에서 SceneColor를 샘플하느냐에 따라 결과 값이 다름

Blendable Location을 기준으로 HDR/LDR 상태가 달라진다
```

---

### SceneDepth
Z-buffer에 저장된 뎁스 값 (Camera에서 Pixel까지의 거리 기반)

- **데이터 타입**: 0~1 정규화된 깊이 값
- **대표적 사용**: Depth 기반 Fog, Outline, DOF Mask, Distance Fade

```
주의: Perspective 카메라에서는 비선형값

→ 실제 거리로 변환 시 inverse projection 계산 필요
```

---

### Custom Depth
엔진의 별도 Custom Depth Pass에 렌더된 깊이 버퍼

- **데이터 타입**: 0~1 정규화된 깊이 값
- **대표적 사용**: 특정 오브젝트만 Outline

```
주의: Mesh 설정에서 Render CustomDepth Pass 활성화 필요

기본 SceneDepth와 다르게 선택적 오브젝트만 포함됨
```

---

### Custom Stencil
Custom Depth Pass에 포함된 Stencil Buffer

- **데이터 타입**: 0~255 정수 값
- **대표적 사용**: 특정 Stencil ID에 따른 Masking

```
주의: 오브젝트 설정에서 Custom Stencil Value 지정해야 함
```

---

### Scene Stencil
Scene 전체의 Stencil Buffer

- **데이터 타입**: 0~255 정수 값
- **대표적 사용**: 엔진 내부 파이프라인 디버깅, 특정 마스크 처리

```
주의: 엔진 내부 용도가 많아 Custom Stencil만큼 직관적이지 않다
```

---

### World Normal
GBuffer에서 가져온 월드 스페이스 노멀 벡터

- **데이터 타입**: XYZ (-1~1 범위)
- **대표적 사용**: Outline, Edge Detection, Normal 기반 쉐이딩 후처리 (Toon Shading 등)

```
주의: TBN 기반 Normal Map이 적용된 최종 Normal 값

Forward Rendering에서는 접근 불가할 수도 있음
```

---

### DiffuseColor
머티리얼의 Diffuse 색만 추출

- **데이터 타입**: RGB HDR
- **대표적 사용**: 조명과 분리된 색상 데이터 처리, Light Pass 전의 머티리얼 표현

```
주의: Specular은 포함되지 않음
```

---

### SpecularColor
머티리얼의 Specular 성분

- **데이터 타입**: RGB HDR
- **대표적 사용**: Specular Highlight 강조, 리플렉션 기반 효과

---

### Subsurface Color
SSS(Subsurface Scattering) 머티리얼의 Subsurface 색상

- **데이터 타입**: RGB HDR
- **대표적 사용**: 스킨/왁스/잎사귀 등 반투명 재질의 후처리 강조

---

### Separate Translucency
Separate Translucency Pass에 렌더링된 반투명 객체의 SceneColor

- **데이터 타입**: HDR
- **대표적 사용**: 유리, 안개, 빛 굴절 효과 조합

```
주의: Translucency 설정이 Separate로 되어 있어야 함.
```

---

### Opacity
픽셀의 불투명도 값

- **데이터 타입**: 0~1 float
- **대표적 사용**: 화면 마스크, blending 제어

---

### PostProcessInput0~6
Post Process Material에서 파이프라인 단계 간 SceneTexture를 주고받기 위한 임시 슬롯

- **PostProcessInput0** : 가장 일반적인 입력. 현재 포스트 프로세스 단계의 입력 이미지 (Scene color)
- **대표적 사용**: 커스텀 블렌더나 여러 후처리 이펙트 중간 결과 저장/재활용

```
주의: 엔진이 자동으로 설정하는 슬롯이며 수동 접근은 제한적
```

---

### Velocity
픽셀의 모션 벡터(이전 프레임 대비 이동량)

- **데이터 타입**: XY float
- **대표적 사용**: 모션 블러, TAA 보조 계산, TSR

```
주의: 정지 오브젝트는 (0,0)
```

---

**링크**
- [UE5 API - ESceneTextureId](https://dev.epicgames.com/documentation/en-us/unreal-engine/API/Runtime/Engine/ESceneTextureId)
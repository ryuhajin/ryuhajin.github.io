---
layout: default
title: "5. Blur and Sharpen Filter"
parent: "Post Process Material"
nav_order: 5
---

# 5. Blur and Sharpen Filter
간단한 블러(blur) 및 샤픈(sharpen) 포스트 프로세스 필터 만들기

---

## 기본 개념

```
화면을 여러 번 샘플링하고 가중 합산해서 이미지를 흐리게 하거나, 역방향으로 적용하여 선명하게 만들기
```

---

## 샘플 오프셋 값

| 샘플 위치 | 오프셋 값 (벡터2) |
| ----- | ----------- |
| 중앙    | (0, 0)      |
| 좌     | (-2, 0)     |
| 우     | ( 2, 0)     |
| 좌상    | (-1, 2)     |
| 우상    | ( 1, 2)     |
| 좌하    | (-1,-2)     |
| 우하    | ( 1,-2)     |

---

## 픽셀 크기 계산

```
화면 해상도: 1920 × 1080
전체 화면 크기: 1.0 × 1.0 (정규화된 UV 좌표)

픽셀 하나의 크기 = 1 / 해상도
```

- 예시

```
// 1920 × 1080 해상도일 때:
픽셀 가로 크기 = 1 / 1920 ≈ 0.0005208
픽셀 세로 크기 = 1 / 1080 ≈ 0.0009259

// 따라서:
1픽셀 이동 = UV (0.0005208, 0.0009259) 만큼 이동
```

---

## 그래프 예제

1. **7개의 샘플 오프셋 사용**: 중앙 1개 + 주변 6개
    - 중앙을 0,0으로 두고 상 2 하 2 좌 1 우 1 샘플링
2. **픽셀 크기 계산**
    - ScreenResolution → (1 / ScreenResolution) = 픽셀 크기
3. **7개의 샘플 오프셋 값 * 픽셀 크기**
    - 화면 해상도 기반 오프셋 계산
4. **UV(texcoord) + 오프셋 = 샘플 위치**
    - 7개의 샘플링 uv 좌표 구하기
5. **각 SceneTexture의 UVs 입력에 4번에서 만든 UV 좌표 연결**
6. **uv 좌표 * 가중치 후 합산**
    - 중앙 = 0.3
    - 나머지 6개 = (0.7 / 6) ≈ 0.11667 (가중 합이 1이 되도록 맞춤)
    - 그 후 결과 add로 합산
7. **Lerp로 블러, 샤픈 제어하기**
    - A: 원본
    - B: 블러
    - Alpha
      - 0 : normal
      - 1 > : blur
      - < 0: sharpen

```
성능 개선 팁

필요시 샘플 수 7개 → 5개로 축소

큰 픽셀 오프셋 값 줄이기 (2 → 1.5)
```

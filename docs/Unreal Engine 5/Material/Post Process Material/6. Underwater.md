---
layout: default
title: "6. Underwater"
parent: "Post Process Material"
nav_order: 6
---

# 6. Underwater
앞에서 만든 PPM을 합쳐 수중 효과 만들기

---

# 그래프 예제

## Depth Fog
수중 깊이 표현

1. **SceneDepth 노드 추가**
2. **texture Coord 노드 추가해서 Scene Depth에 연결**
    - 전체 화면 텍스쳐 좌표를 기반으로 장면 깊이 샘플링
3. **시작거리와 최대거리 설정하기**
    - Near : Scene Depth - scalar(200)
    - Far : Scene Depth - scalar(200) / scalar(700)
4. 3번 결과 saturate
5. power(saturate, 0.5)
    - 그라데이션을 늘리고 어두운 깊이감 더 표현하기
    - 해당 결과는 러프 노드의 알파값으로 사용
6. Lerp(A, B, alpha)
    - A : 일반 color
    - B : V3(blue) color (수중 표현을 위한 푸른 컬러 설정)
    - alpha : Depth fog
7. 러프 노드 값 * 아래서 만드는 확대 좌표를 uv로 받은 scene texture

---

## 화면 확대
화면 중앙만 확대된 것처럼 볼록하게 표현하기

1. T = (texcoord - v2(0.5, 0.5))
2. T * 0.5
    - 화면 2배로 확대
3. T + v2(0.5, 0.5)

---

## 거리 마스크
화면 중앙과 가장자리를 나누는 마스크

1. T = (texcoord - v2(0.5, 0.5))
2. T * 1.5
3. vectorLength(T * 1.5)
4. saturate

```
거리마스크, 화면 확대 러프로 보간

Lerp(A, B, alpha)

A : 화면 확대
B : 기본 tex coord

alpha : 거리 마스크
```

- 마스크 0 : 확대
- 마스크 1 : 기본

> 러프 값을 scenetexture uv로 사용

---



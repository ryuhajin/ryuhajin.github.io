---
layout: default
title: "19. Procedural Noise"
parent: "EP [11 , 20]"
nav_order: 9
---

# EP 19 : Procedural Noise
절차적 노이즈

---

## Perlin Noise
1981년 켄 펄린(Ken Perlin)이 영화 <트론(Tron)>의 특수 효과를 위해 개발한 알고리즘

### Perlin Noise 특징
1. **절차적(Procedural)**
    - 수학 공식을 기반으로 실시간 생성됩
2. **무작위성(Random)**
    - 반복되지 않는 무작위 패턴을 가짐
3. **연속성(Coherent)**
    - (x, y) 지점의 값은 그 옆인 (x+0.1, y)의 값과 부드럽게 연결
4. **무한성**
    - 수학에 기반하므로 이론상 무한하고, 반복되지 않는(non-repeating) 패턴 생성 가능
5. **활용**
    - 구름, 지형, 물결, 텍스처 생성, procedural world 생성

> - Octave: 패턴을 여러 스케일로 겹쳐서 세밀도를 높이는 단계. 각 단계는 하나의 옥타브로 불림

---

## Perlin Noise 비용 (ALU vs. Memory)
### **알고리즘으로 계산하기 (ALU 사용)**
   - 펄린 노이즈는 본질적으로 복잡한 수학 공식
   - 노이즈의 기본 패턴(1 옥타브)을 HLSL 쉐이더 코드로 구현하면
   - 약 61개의 픽셀 쉐이더 명령어와 8번의 텍스처 샘플링이 필요

```
만약 우리가 'Render Clouds'처럼 디테일한 8 옥타브 노이즈를 만든다면, 비용은 8배
(약 488 명령어 + 64 텍스처 샘플링)
```

> 실시간 게임의 모든 픽셀에 대해 매 프레임 계산하는 것은 GPU에 엄청난 산술 연산(ALU) 부하를 주며, 사실상 불가능에 가깝다

---

### **텍스쳐로 미리 만들어서 사용하기 (Memory 사용)**
    - 비싼 수학 계산을 실시간으로 하지 않기 위해
    - 펄린 노이즈 계산 결과를 미리 3D 텍스처로 만들어 사용
    - 즉 **볼륨 텍스처(Volume Texture)**에 저장하는 방식을 고안

```
쉐이더는 61개의 명령어를 실행하는 대신, VRAM에 있는 이 3D 텍스처를 단 한 번 샘플링하면 됨

비용이 (61 명령어 + 8 샘플)에서 (16 명령어 + 1 샘플) 수준으로 급격히 낮아짐
```

> 단점: 이 텍스처는 메모리(VRAM)를 차지하며, "무한하고 반복되지 않는" 원본의 특징을 잃고 **타일링(Tiling)**되는 패턴이 됨
> - (하지만 이 타일링은 옥타브를 잘 섞어서 숨길 수 있음)

---

## Noise node
Material 에디터 내에서 노이즈, 변위/무작위화 프로시저를 만들 때 사용

- 입력 : 좌표(Position/Vector) 또는 UV 등
- 출력 : 값이 불연속 또는 연속 노이즈 패턴
- 파라미터에 따라 스케일, 반복, 타일링 등이 조절 가능함

| 항목 | Noise | Vector Noise |
| --- | ---- | --- |
| 출력 값 형태 | 보통 스칼라 값 (float) 또는 채널 하나 | 벡터 값 (float3 또는 float4) – 색상, 방향, 거리 등 복합 정보 |
| 대표 사용처  | 그레이스케일 노이즈, 범프맵, 단일 값 변화  | 위치 변형, 방향 필드, 복합 패턴, 벡터 기반 노이즈 |
| 연산량     | 상대적으로 낮음  | 벡터 채널 + 고급 타입(Gradient, Curl) 포함 → 연산 많음  |


### 성능 주의점
1. Vector Noise는 Noise보다 명령어 수가 많다
2. Octaves 값을 올리면 성능 비용이 기하급수적으로 증가한다
3. Tiling을 켜면 반복 가능 패턴을 만들 수 있지만 추가 연산이 들어간다


**링크**
- [UE5 - vector noise](https://dev.epicgames.com/documentation/ko-kr/unreal-engine/vector-material-expressions-in-unreal-engine?application_version=5.5)

---

**읽어보면 좋은 링크**
- [Implementing a Random 2D Noise Function](https://youtu.be/jtABrURpEc8?si=2B4lVBOW_mz6y80U)
- [Pseudorandom Noise](https://catlikecoding.com/unity/tutorials/pseudorandom-noise/)
- [Generative designs - random](https://thebookofshaders.com/10/)
- [노이즈 종류들 - Noise Functions](https://gameidea.org/2023/12/16/noise-functions/)

---
layout: default
title: "9. Texture Compression and Settings"
parent: "EP [1 , 10]"
nav_order: 7
---

# EP 9 : Texture Compression and Settings
언리얼 엔진을 포함한 대부분의 현대 게임 엔진은 블록 압축(Block Compression) 방식을 사용

- 텍스처를 일정한 크기(주로 4x4 픽셀)의 작은 블록으로 나눈 뒤, 각 블록 단위로 데이터를 압축하는 기술

## 블록 압축 알고리즘 표준

```
DirectX Texture Compression (DXTC)
Block Compression (BC)
```

### 키워드 노트
- **Details 패널의 Streaming** : 카메라에 가까이 오면 불러오고, 멀어지면 GPU 메모리에서 제거. 엔진에서 사용하는 효율적 메모리 관리 방식
- **아티팩트(artifact)** : 원래 의도한 이미지나 데이터와 다르게, 압축·연산 과정에서 생겨버린 부자연스러운 오류 흔적

---

## Compression Settings
텍스처 메모리 사용량은 압축 방식과 알파 채널 유무에 따라 달라짐

포맷 이름 |	주요 용도 |	특징	| 압축률 (32비트 RGBA 대비) |
---|---|---|---|
BC1	| 3채널 RGB. 알파 채널이 없는 기본 색상 (Albedo/Diffuse)	|	아티팩트가 생길 수 있으나 메모리 절약 효과 큼 |		8:1 |	
BC3	| 4채널 RGBA.	알파 채널이 있는 텍스처 (투명도, 마스크)|	알파 채널이 상대적으로 압축 손실이 적어, 중요한 데이터를 알파 채널에 넣는 것이 좋음 |	 4:1 |
BC7| DirectX 11 이상 고품질 RGBA 텍스처 (3채널/4채널 지원)|	품질이 BC1보다 좋으나 메모리 사용량은 BC1 대비 2배, BC3과 동일한 수준 |		4:1|
Masks (No sRGB)	| 여러 흑백 데이터(AO, Roughness, Metallic 등)를 각각 채널에 담는 방식 | 항상 sRGB 비활성화(Linear) |	4:1|
Normalmap (BC5)	|	DirectX 11 이상에서 노멀맵 전용 |	R,G (x,y 축 성분) 채널만 쓰고 B는 (z축) 셰이더에서 재구성 |	4:1|	

---

## sRGB
텍스처가 sRGB 색 공간에 있는지를 나타냄

- **체크 (On)**
  - 사람이 시각적으로 인지하는 색상 정보(Albedo)를 담은 텍스처의 경우 반드시 체크
  - 셰이더에서 이 텍스처를 샘플링할 때 하드웨어적으로 **감마 보정(Gamma Correction)이 이루어져 선형 공간(Linear Space)으로 변환**
- **해제 (Off)**
  - 노멀 맵, 마스크 텍스처(Roughness, Metallic 등)와 색상이 아닌 수치 데이터를 의미하는 경우에는 반드시 체크를 해제
  - 감마 보정이 적용되면 데이터가 왜곡되어 잘못된 렌더링 결과를 낳게 됨

---

## Sampler Type
Texture Sample가 텍스처 데이터를 어떻게 해석할지 지정

> sRGB off 체크시 Sampler Type Linear Color로 바꾸기

### Sampler Type 종류

| Sampler Type  | 설명   | 사용 권장 용도   | 특징／주의사항 |
| --- | --- | --- | --- |
| **Color** | 텍스처를 sRGB 색공간(감마 보정)으로 읽어들이는 타입| 알베도(색상) 텍스처, 컬러 데이터 | sRGB ON 상태로 가져오는 것이 적절. 연산용 데이터에선 부적합 |
| **Linear Color**| 색공간 변환 없이 **선형(Linear)**으로 읽는 타입     | 마스크, 커스텀 데이터, 연산용 텍스처    | sRGB 플래그 OFF 상태에서 사용. 연산용 채널에 적합 |
| **Grayscale**   | 단일 채널(R 채널)만 샘플링하여 단일 값으로 결과   | 흑백 마스크, 단일 채널 커스텀 데이터    | 채널 수가 작아 최적화 가능. 여러 채널 사용엔 부적절 |
| **Masks** | RGBA 채널을 데이터로 취급, 여러 마스크 채널 동시 사용 가능 | Packed 마스크 텍스처(예: Roughness, Metallic, AO) | 색상 표현이 아닌 **데이터 표현용**. 색상용으론 부적절 |
| **Normal**| 노멀맵 전용 샘플러 타입| 버텍스/피셀 노멀맵   | 압축 포맷, 샘플링 경로가 일반 텍스처와 다를 수 있음  |

---

##  Mip Gen Settings (밉맵 생성 설정)
원본 텍스처의 다양한 축소 버전을 미리 만들어두는 기술. 카메라로부터 멀리 있는 객체는 고해상도 텍스처 대신 저해상도 밉맵을 사용하여 렌더링함으로써 성능을 향상

- **FromTextureGroup**: Texture Group 설정에 따라 밉맵 생성 방식을 결정. 대부분 이 설정을 사용
- **NoMipmaps**: 밉맵을 생성하지 않음. **UI 텍스처와 같이 항상 일정한 크기로 화면에 표시되는 경우에만 사용**
- **Sharpen**: 밉맵을 생성할 때 샤픈 **필터를 적용하여 디테일을 보존하려 시도**

---
layout: default
title: "5. Flipbook Animation"
parent: "EP [1 , 10]"
nav_order: 3
---

# EP 5 : Flipbook Animation

## Animation FPS
머티리얼에서 FPS라고 쓰는 건 사실 애니메이션 재생 속도를 의미하는 가상의 프레임레이트. 실제 렌더링 FPS와는 독립적

```c++
Frame = floor(Time * FPS) % N // n = 스프라이트 시트의 전체 프레임 개수
```

- 여기서 FPS는 1초 동안 몇 개의 스프라이트 칸을 넘길지를 의미
- 렌더링 FPS에 상관없이 애니메이션을 1초에 12장(12 FPS)의 속도로 재생하라고 명령한 것

## Flipbook
내장 함수. time과 행, 열 값을 받음

# Flipbook 효과 직접 만들기
## frac
숫자의 소수점 부분만 반환

- 0~1 사이의 주기적 패턴에 매우 유용
- UV 스크롤이나 간단한 펄스 생성에 사용

```c++
Frac(3.7) = 0.7
Frac(-2.3) = 0.7  // 주의: 음수일 때 결과가 양수
```

---

## floor
소수점 이하를 버리고 정수만 남김 (항상 내림)

```c++
Floor(3.0) = 3.0
Floor(3.2) = 3.0
Floor(3.7) = 3.0
Floor(3.999) = 3.0
Floor(-2.3) = -3.0  // 주의: 음수일 때 더 작은 수로 내림
```

### Floor vs 다른 정수화 노드 비교

입력값 |	Floor (내림)|Ceil (올림)|	Round (반올림)|
2.1	|2.0 | 3.0	|2.0|
2.5	|2.0	|3.0|	3.0|
2.9	|2.0	|3.0|	3.0|
-1.2	|-2.0	|-1.0|-1.0|

**플립북에는 왜 Floor를 사용하나?**
1. 시간이 흐르면서 프레임이 순차적으로 증가해야 함
2. Ceil을 사용하면 프레임이 도약하는 문제 발생
3. Round를 사용하면 2.5초 때 3번 프레임으로 점프하는 불연속 발생

---

## Modulo
언리얼의 실수 modulo는 C의 fmod 계열이라 피제수(첫 인자)의 부호를 따름

```c++
// 주의: y == 0이면 정의되지 않음
float r = FMath::Fmod(x, y);
if (r < 0) r += FMath::Abs(y);
```

### Modulo vs Clamp 비교

|연산	| 결과	| 용도| 
|Modulo	| 0,1,2,3,0,1,2,3,...	| 무한 반복 애니메이션|
|Clamp	| 0,1,2,3,3,3,3,3,...	| 한 번 재생하고 정지하는 애니메이션|

---

## fmod
부동소수점 숫자를 위한 나머지 연산

```c++
fmod( 7.5, -3.0) =  1.5  // 피제수가 양수면 결과 양수
fmod(-7.5,  3.0) = -1.5  // 피제수가 음수면 결과 음수
```

---

## param
1. Scalar Parameter : float
2. Vector Parameter : Vec3 → A 무시 / Vec2 → ComponentMask RG로 사용
3. Material Parameter Collection(MPC) : 전역 공유 값
4. Named Reroute (Declaration/Usage) : Vec2/Vec3/Vec4 모두 가능. 인스턴스에서 값 조절은 불가

---
layout: default
title: "2. Get a Reference to the Pawn"
parent: "BluePrint"
nav_order: 1
---

# 2. Get a Reference to the Pawn
**폰 레퍼런스 가져와 플레이어 쳐다보게 하기**

## 사용 노드

1. **get all actors of class**
    - actor class 타입 선택하여 가져올 타입의 array 설정
    - 출력 : out actors (actor 레퍼런스 배열)
    - **get (a copy)로 배열 바로 들고오기 가능**
2. **For Each loop**
    - get all actor of class에서 가져온 레퍼런스 array 항목 가져와 루프 실행
    - array element : get object name으로 객체 이름 출력
    - array index : append string으로 객체 이름 + 인덱스 출력 가능
3. **Is valid index**
    - 인덱스 체크
4. **Find Look at Rotation**
   - return Value : start -> target 쳐다보는 회전 값
   - start : pawn의 위치 (드론 위치)
   - target : 쳐다볼 액터 위치 (플레이어 카메라 등)
     - 해당 값을 set Actor Rotation 회전값으로 사용하면 플레이어만 계속 쳐다보게 만들 수 있음 
5. **Get**
    - **get 우클릭 후 맨 아래에 검증된 get 으로 변환 가능**
6. **Rinter To** : Finter To, Vinter To 등 다양한 보간 가능
    - 회전할 때 부드러운 느낌주기
    - delta time에 tick delta seconds 입력 가능
    - target : Find Look at Rotation에서 가져온 lookat 회전값 사용

---

## static mesh add socket manager
**메시에 소켓 추가하기**

1. socket manager의 소켓 `+` 버튼 눌러 추가하기
2. 소켓을 피벗으로 움직여 위치 설정 가능
3. 블루프린트에서 get Mesh로 메쉬 가져오기
4. **get socket location**으로 소켓 위치 가져오기
    - 소켓 이름으로 특정 소켓 가져오기

> UE 모델링 모드에서 모델의 피벗위치 수정 가능!!!

---

## spawn actor
소켓 위치에 액터 스폰하기

1. **spwanActor** 노드 사용
    - class : 스폰할 BP 액터 지정
    - spawn Transform : **get socket transform**로 지정된 소켓 위치 가져오기\
    - return value : 스폰된 액터 레퍼런스
2. 소켓에 할당된 **BP 클래스는 스폰되면 begin play 함수 작동 시작**

---

## Projectile Movement
발사체 이동 구현하기

1. 블루프린트에 **projectile movement** 컴포넌트 추가하기
    - 중력 이용 O. 이동량 등 여러 물리 효과가 기본으로 제공
    - 발사체 컴포넌트 details에서 발사체 스피드 등 속성 설정 가능
2. **initial Life Span**
    - 발사체 actor가 언제 소멸할지 BP details에서 설정 가능

---

## BP functions
맴버 함수 (자체 기능) 만들기

- funcions의 **input, output 추가하여 함수 노드의 입출력 생성 가능**
- details의 **category 설정으로 변수 관리 가능**

```
function details의 pure 체크 : 노드에 실행, 출력 핀이 없어짐 = pure 함수

BP 그래프의 노드 그룹 선택 뒤 우클릭 -> collapse to function으로 바로 함수 묶기 가능
```

---

## Spawn Effects
나이아가라 시스템 스폰하기

1. **Spawn System at Location** 노드 사용
    - system Template : 나이아가라 시스템 이펙트 선택
2. **get socket Tramsform** 노드의 구조체 출력 핀을 우클릭
3. **split Struct Pin**으로 구조 핀 쪼개기
    - location, rotation, scale로 각각 구조체 핀 분리됨
4. 해당 위치, 회전 등을 1번 노드의 구조체 입력 값으로 사용

---

## meta Sounds
wav 파일 가져와서 사운드 출력하기

1. 컨텐트 폴더에 sound 에셋 (예: `.wav`) 추가
2. 컨텐트 서랍 우클릭 -> 오디어 -> 메타 사운드 선택
3. `SFX_` 접두사 붙이고 메타 사운드 생성 후 더블 클릭 -> 메타사운드 그래프 열림
4. 메타 사운드 그래프에서 **input 노드 type 설정 : wave**
6. 메타 사운드의 **output format으로 모노, 스테레오 등 출력 사운드 타입 설정**
   - 모노 : 채널이 하나. 좌우 같은 소리 재생
   - 스테레오 : 왼쪽, 오른쪽에서 서로 다른 소리 재생
7. **default Velue에서 array 형식으로 여러 가지 소리들을 배열로 저장 가능**
8. **random get**
    - 배열에서 랜덤한 사운드 가져오기
9.  **wave player** 노드로 출력타입에 맞는 플레이어 설정
    - **Pitch Sihft** 설정으로 음계 높일 수 있음
      - random float사용해 랜덤하게 음계 변경

---

### 감쇠 설정하기
1. 좌상단의 소스 기어 아이콘 클릭
2. 디테일에 감쇠 (attenuation) 설정 클릭
3. 리스트 상단에 sound Attenuation 클릭
    - 감쇠 설정 에셋 생성
4. `Att_` 접두사 에셋 생성
5. 해당 에셋의 details에서 내부 반경과 폴오프 거리 설정하기
    - **inner Radius** : 감쇠가 시작되는 위치
    - **falloff Distance** : 감쇠 총 거리 (해당 위치 벗어나면 소리 안들림)
---

## 블루프린트에서 사운드 추가
1. **play Sound 2d**
    - 음원이 어디에 있던간 **동일한 볼륨으로 사운드 재생**
2.  **play Sound at Location**
    - 지정된 **위치에서 소리 재생**
    - **멀리 떨어져있으면 소리 작아짐**
3. 위에서 설정한 메타 사운드(SFX)를 sound 에셋으로 사용

---


---
layout: default
title: "2. Collision Volumes"
parent: "Physics in UE"
nav_order: 2
---

# 2. Collision Volumes
언리얼에서 콜리전(충돌) 형태를 정의해서 **Physics Body의 모양을 만드는 방법**은 크게 두 가지

1. 액터의 블루프린트에서 콜리전/Shape 컴포넌트 추가
2. 스태틱 메쉬 에셋 자체에서 Simple/Complex Collision 설정

---

## 블루프린트 컴포넌트
블루프린트에서는 콜리전 전용 컴포넌트(Shape 컴포넌트)를 추가해서 Physics Body의 형태를 만들 수 있다

1. 블루프린트 에디터의 **Components** 패널에서 `+ Add` 버튼 클릭
2. `Box Collision`, `Sphere Collision`, `Capsule Collision` 등 **Collision / Shape 컴포넌트** 선택
3. 뷰포트에서 콜리전 컴포넌트의 위치/회전/스케일 조정
4. Details 패널에서 다음 속성들을 설정할 수 있다.
   - **크기/반지름/높이** 등 기하 속성
   - **Collision Presets**
   - **Object Type**
   - **Collision Responses** (Block / Overlap / Ignore)
5. 메쉬 컴포넌트에 `Simulate Physics`를 켜면, 이 콜리전 컴포넌트들이 **Simple Collision 형태**로 사용되어 Physics Body가 생성/시뮬레이션된다.


---

## 스태틱 메쉬 콜리전
Static Mesh 에디터에서는 메쉬 자체에 콜리전을 내장할 수 있음

여기서는 두 가지 개념을 구분해야 함

1. **Simple Collision**
    - 박스/구/캡슐/Convex Hull 등의 단순한 기하 프리미티브들의 집합
    - 대부분의 게임 플레이/물리 시뮬레이션에서는 **Simple Collision** 사용
2. **Complex Collision**
    - 메쉬의 삼각형(트라이메시)을 그대로 사용하는 충돌 형태
    - 레이캐스트(라인 트레이스) 등 정밀한 충돌 검사에서는 **Complex Collision**을 사용할 수 있다

---

1. Static Mesh Editor 상단의 `Collision` 메뉴
  - Box/Sphere/Capsule 추가
  - K-DOP 생성
  - Auto Convex Collision 수행
  - 생성된 콜리전 프리미티브들의 위치/크기 조정

> 콜리전 프리미티브는 여러 개를 추가할 수 있으며, 이들이 합쳐져 최종 Simple Collision을 생성

---

### K-DOP
**K-DOP(K Discrete Oriented Polytope)** 는 박스보다 메쉬에 더 잘 맞도록 만든 **다면체 바운딩 볼륨**

```
기본 아이디어:  

축에 평행한 K개의 평면으로 박스를 감싸고,  
각 평면을 메쉬에 최대한 가깝게 밀어 붙여 깎여 나간 박스 형태의 콜리전 볼륨을 만든다.
```

1. **10DOP-X / 10DOP-Y / 10DOP-Z**
   - 기본 박스의 6면 + 특정 축 방향으로 베벨된 4면 = 총 10면
   - X / Y / Z 방향으로 어느 모서리를 깎을지에 따라 종류가 나뉜다
2. **18DOP**
   - 모든 에지를 베벨링하여, 박스보다 메쉬에 더 잘 맞는 18면 다면체
3. **26DOP**
   - 에지와 코너까지 모두 베벨링한 26면 다면체
   - Simple Collision으로는 비교적 정밀한 편이지만, 프리미티브 수가 늘어날수록 연산 비용도 증가

---

### Auto Convex Collision
Auto Convex Collision은 메쉬를 여러 개의 **Convex Hull(볼록 헐)** 로 자동 분해해 주는 도구이다

1. Static Mesh Editor 상단 메뉴: `Collision > Auto Convex Collision` 선택
2. 우측 Details 패널에서 다음과 같은 파라미터를 설정:
   - **Hull Count**: 생성할 Convex Hull(껍질)의 개수
   - **Max Hull Verts**: 각 헐이 가질 수 있는 최대 정점 수
   - **Hull Precision**: 원본 메쉬를 얼마나 정밀하게 따라갈지 결정하는 정밀도
3. 설정 후 `Apply` 버튼을 누르면, 메쉬를 감싸는 여러 개의 Convex Collision이 자동 생성
   - 설정값이 높을수록 더 정밀해지지만, 연산 비용이 비싸진다

---

## Collision Complexity
Static Mesh의 Details 패널에는 `Collision Complexity` 설정이 있음

### 대표적으로 다음 네 가지 모드
1. **Project Default**
   - 프로젝트 세팅의 `Default Shape Complexity` 값을 따른다
   - 보통 기본값은 `Simple And Complex`
2. **Simple And Complex**
   - 이 메쉬에 대해 **Simple Collision과 Complex Collision을 모두 유지**
   - 일반적인 동작:
     - **Simple Query** (예: 물리, 스윕, 대부분의 충돌) → Simple Collision 사용
     - **Complex Query** (예: 정확한 라인 트레이스) → Complex Collision 사용
3. **Use Simple Collision As Complex**
   - **Simple Collision만 생성**하고, Complex Query가 와도 **Simple Collision을 대신 사용**
   - 결과적으로 메모리 절약 (트라이메시 콜리전 데이터 없음)
   - 충돌 계산 속도도 Simple 기준으로 동작
4. **Use Complex Collision As Simple**
   - **Complex Collision(트라이메시)만을 사용**하고, **Simple Collision은 사용하지 않는다**
   - 모든 충돌/쿼리에서 메쉬의 삼각형 콜리전에 직접 맞춰 계산
   - 해당 설정은 `Simulate Physics`를 켜서 **동적 Rigid Body로 쓰는 것은 허용되지 않는다**
   - 실시간으로 물리 시뮬레이션을 수행하는 것은 비용이 너무 크기 때문

---

# 3. Collision Events

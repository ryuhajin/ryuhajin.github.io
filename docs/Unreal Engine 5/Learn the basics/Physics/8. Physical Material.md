---
layout: default
title: "8. Physical Material"
parent: "Physics in UE"
nav_order: 8
---

# 8. Physical Material
표면의 물리적 성질을 정의하는 데이터 자산.

- 표면이 충돌할 때 어떤 마찰, 반발력, 소리, 효과 등이 발생할지를 제어하는 핵심 시스템

---

## Physical Material이란?
- 지면·벽·물체 표면이 가지고 있는 “물리 특성”을 정의
- 표면 간 충돌에서 나타나는 물리적 거동을 결정
- Chaos Physics / HitResult / Particles / Sound / Decal 등 다양한 시스템과 연동

> 간단히 말해
> - 이 표면은 미끄럽다, 잘 튕긴다, 충격이 크다, 소리가 특정하게 난다 등을 정의하는 데이터

---

## Physical Material 역할
1. **물리 충돌 특성 계산**
   - Dynamic 물체가 바닥에 떨어졌을 때, 얼마나 튕기는지 (Restitution), 얼마나 멈추는지 (Friction)
   - → 캐릭터, 투사체, 낙하 오브젝트 모두 영향을 받음
2. **HitResult에서 물리적 표면 정보를 제공**
    - Line Trace, Hit Event 등 충돌 처리 시 `Hit.PhysMaterial` 을 통해
    - 맞은 표면의 Physical Material을 알 수 있음
3. **Surface Type 시스템과 연동**
    -  Project Settings -> Physics의 **SurfaceType**과 연결

---

## Physical Material 생성
1. 콘텐트 드로어 창 우클릭
2. 리스트의 Physics 카테고리에서 Physical Material 클릭
3. Physical Material 클래스 선택하여 생성

---

# Physical Material 속성
피지컬 머티리얼의 주요 속성

## Friction (마찰)
표면 마찰 계수. Dynamic 물체의 속도 감소 또는 미끄러짐 정도에 영향

- **Friction = 높음** → 매우 끈적함, 빨리 멈춤  
- **Friction = 낮음** → 미끄러짐

```
참고: 언리얼 에디터에서 개별로 보이진 않아도 Chaos는 Friction 값을 내부적으로 분리해 사용한다

- Static Friction → “멈춰 있는 물체를 움직이려면 필요한 마찰”
- Dynamic Friction → “이미 움직이고 있는 물체가 이동을 멈추려 하는 마찰”

사용자의 입력값을 기반으로 자동으로 계산함
```

---

## Friction Combine Mode
두 표면의 Friction 결합 방식이 결정됨 (바닥과 물체 자체의 마찰력)

- Average : 평균, 기본값
- Multiply : 곱하기
- Min : 둘 중 작은 값
- Max : 둘 중 큰 값

---

### Static Friction (정지 마찰)
정지해 있는 물체를 움직이게 하려 할 때 필요한 힘의 크기를 제어

---

## Restitution (반발 계수 / 탄성)
물체가 표면에 충돌했을 때 **얼마나 튕기는가**를 결정

- **Restitution = 1.0** → 완전히 튕김 (탄성 충돌)  
- **Restitution = 0.0** → 전혀 튕기지 않음

> 위 마찰력과 마찬가지로 Combine Mode 역시 적용됨

---

## Density (밀도)
Chaos는 Mass를 직접 사용하지만 Physical Material에서 **Density(밀도) 기반으로 Mass를 계산하도록 설정**할 수 있음

- 금속 같은 무거운 재질은 밀도를 높게 (예: 2.0) 설정

### 기본 방식: Mesh 내부 계산
```
StaticMeshComponent 의 “Collision Volume” × “기본 Density” 로 Mass 자동 계산
```

### Physical Material Density 사용
```
StaticMeshComponent 의 “Collision Volume” × “Physical Material Density” 로 Mass 자동 계산
```

### 정리
1. **Mass Override ON** → Physical Material **Density 무시**
2. **Mass Override OFF + Physical Material Density 설정**됨 → Density × Volume 으로 Mass 계산
3. **둘 다 없음** → 기본 Engine Density로 계산

> Mass Override 가 가장 강함

---

## Surface Type (표면 타입)
C++이나 블루프린트 코드에서 표면을 식별하기 위한 태그(Tag) 역할

- 예를 들어, 캐릭터가 걷는 표면이 '풀'인지 '콘크리트'인지 판별하여 서로 다른 발자국 소리를 재생할 때 사용

---

## Surface Type 추가하기
1. Project Settings -> Physics
2. Physical Surface에서 최대 62개까지 커스텀 타입을 정의할 수 있음
3. 예: SurfaceType1을 "Ice"로 명명
4. 해당 Surface Type을 머티리얼 Surface Type에 설정 가능

| SurfaceType  | 이름    |
| ------------ | ----- |
| SurfaceType1 | Sand  |
| SurfaceType2 | Grass |
| SurfaceType3 | Stone |
| SurfaceType4 | Water |

> SurfaceType이 HitResult에서 얻을 수 있는 지면 종류가 된다

```
피지컬 머티리얼은 액터에 직접 적용하는 것이 아니라, 머티리얼 그래프 출력 노드의 속성을 통해 연결한다

머티리얼을 열고 디테일 패널에서 Physical Material 슬롯에 해당 Physical Material을 설정한다
```

---

## Strength (세기)
Strength는 **Geometry Collection(파괴 시스템)에서 실질적으로 사용되는 값**이다

- Strength 값은 일반 Rigidbody(StaticMesh)의 충돌/미끄러짐/튕김에는 사용되지 않음
- **Chaos Destruction(GeometryCollection) 또는 커스텀 Damage/Fracture 로직에서만 참조되는 값**

---

### Tensile Strength (인장 강도)
얼마나 잡아당기는 힘을 버틸 수 있나

- 재질이 늘어나는 방향(당기는 방향) 으로 받는 힘에 대한 허용 한계
- 이 값보다 큰 인장 응력이 걸리면 재질이 찢어지거나 끊어져서 파단(fracture) 되는 것으로 간주

### 예시
```
- 밧줄 · 철근을 양 끝에서 서로 당길 때
- 유리 판을 양쪽으로 잡아 뜯을 때
- 천 · 고무줄이 늘어나다가 끊어지는 상황
```

---

### Compression Strength (압축 강도)
얼마나 누르는 힘을 버틸 수 있나

- 재질이 눌려서 찌그러지는 방향(압축 방향) 으로 받는 힘에 대한 허용 한계
- 이 값보다 큰 압축 응력이 걸리면 재질이 부서지거나, 으스러져 망가진 것으로 간주

### 예시
```
- 콘크리트 기둥이 위에서 압력을 받다가 붕괴
- 스티로폼 블록을 눌러서 부서뜨리는 상황
- 금속 기둥이 옆에서 눌려 휘어지는 좌굴
```

---

### Shear Strength (비틀림 강도)
얼마나 비틀리는 힘을 버틸 수 있나

- 재질이 면을 따라 엇갈리게 미끄러지는 힘(전단 방향) 에 대한 허용 한계
- 이 값보다 큰 전단 응력이 걸리면 재질이 면을 따라 쪼개지거나 미끄러지며 파단되는 것으로 간주

### 예시
```
- 가위로 종이를 자를 때 (전단)
- 나사·볼트가 비틀려서 머리가 떨어져 나가는 상황
- 빔이 중간에서 미끄러지듯 끊어지는 것
```

---

## Damage Modifier
표면이 받는 **데미지를 얼마나 증폭/감쇠시킬지 결정하는 값**. Damage Modifier는 Unreal의 **Damage System과 직접 연동됨**

```
Damage Modifier는 Unreal의 Damage 시스템(PointDamage, RadialDamage 등)이 HitResult.PhysMaterial을 읽어 자동으로 반영하는 값이다

캐릭터 HP와는 직접 연동되지 않지만, 총알·폭발 데미지 전달량에 영향을 줌
```

- Damage Modifier = 2.0 → 받는 데미지 × 2
- Damage Modifier = 0.5 → 받는 데미지 × 0.5

> 총알이 이 표면을 때릴 때 얼마나 관통/파괴시키는가?” 같은 판단에 사용
> - 예: 물 표면은 Damage Modifier = 0 (파괴 없음)

---

## Physical Material로 지형별 이펙트 제어

```
[캐릭터 발 밑 LineTrace]  
     ↓  
[Break Hit Result → PhysMaterial → SurfaceType]  
     ↓  
[Switch on SurfaceType]

  SurfaceType_Sand:  모래 먼지 + 모래 발자국 소리  
  SurfaceType_Grass: 풀 흔들림 + 억새 소리  
  SurfaceType_Rock: 돌 부딪힘 소리 + 데칼 X  
  SurfaceType_Metal: 금속 발소리  
  SurfaceType_Water: 물 튀김 + 물장구 소리 + Splash 파티클  
```

즉

1. 각 **지면 머티리얼에 Physical Material 지정**
2. **Physical Material에 Surface Type 설정**
3. 블루프린트에서 **캐릭터의 발바닥 트레이스 HitResult → PhysMaterial → SurfaceType 읽기**
4. **SurfaceType에 따라**
    - 발자국 소리
    - 발자국 데칼
    - 먼지 파티클
    - 스크립트 등을 **분기해 처리**한다

---

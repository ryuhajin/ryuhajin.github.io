---
layout: default
title: "6. Movement and Forces"
parent: "Physics in UE"
nav_order: 6
---

# 6. Movement and Forces

---

# Physics Volumes
Physics Volume은 특정 영역에 들어온 Pawn의 물리 관련 이동 특성을 변경할 수 있는 볼륨(Volume)

- 주 용도는 **물 속 이동(수영), 늪·진흙의 저항, 중력이 다른 공간** 등을 구현하는 것

---

## physics volumes 적용 범위

### 적용 대상
**CharacterMovementComponent를 사용하는 Pawn** (Character, DefaultPawn, Custom Pawn + CMC)

```
Physics Volume의 설정은 CharacterMovementComponent가 있을 때만 실제 이동 특성에 영향을 줌
```

### 미적용 대상
- 물리 시뮬레이션(Rigid Body) Actor  
- Static Mesh Actor  
- Skeletal Mesh Actor(물리 이동 없음) 등

> 이들은 Physics Volume 영역에 들어가도 영향을 받지 않는다
> - 다만 Overlap 이벤트는 발생할 수 있음

---

## physics volumes 추가
1. 상단 메뉴의 **Create(상자 + 아이콘)** 클릭  
2. **Volumes** 카테고리에서 **Physics Volume** 선택  
3. 레벨에 박스 형태의 Physics Volume 생성  
4. Details 패널에서 Character Movement 관련 값을 설정

---

## physics volumes details
피직스 볼륨의 효과는 폰이 볼륨 안에 **완전히(Completely) 들어오기 전까지는 시작되지 않는다**

- 폰의 일부라도 볼륨에 **겹치자마자 효과**가 나타나게 하고 싶다면
- **Physics on Contact 속성을 True로 설정**하기

---

### Character Movement
1. **Terminal Velocity (종단 속도)**
    - 캐릭터가 **낙하(Falling) 상태일 때 적용되는 최대 속도**
    - 낮은 숫자로 설정하면 볼륨 안에서 캐릭터가 천천히 떨어짐
    - 진흙, 늪 같은 것을 시뮬레이션 하기 좋음
2. **Fluid Friction (유체 마찰)**
    - **폰의 걷기 속도에 적용되는 마찰의 양 설정**
    - 값이 높을수록 폰은 더 느리게 걸음
3. **priority (우선 순위)**
    - 두 개의 피직스 볼륨이 겹쳤을 때 사용
    - **겹친 구역에서 어느 볼륨의 설정을 따를 지 결정**
    - 더 높은 priority 값을 가진 볼륨이 선택
4. **water volume**
    - 해당 값 체크 : 캐릭터는 **MovementMode = Swimming 으로 전환**
    - 지상 점프(Jump)는 동작하지 않으며 대신 수영 모드에서는 **Jump 입력이 상승(Upward) 이동**으로 동작  

> Water Volume이 True로 설정되면 앞서 설정한 Terminal Velocity 속성은 더 이상 사용되지 않음
> - 즉, 두 설정을 동시에 사용할 수는 없음

---

## 정리
- CharacterMovementComponent를 기반으로 동작  
- Swimming 모드에서는 Terminal Velocity를 사용하지 않음  
- Fluid Friction은 Walking/Swimming 모두에서 작동 
- Physics on Contact로 부분 진입 시 효과 즉시 적용 가능
- Priority로 중복 설정 해결

---

# Physics Body 유형: Dynamic / Kinematic / Static
물리 시뮬레이션에서 컴포넌트(주 대부분 PrimitiveComponent)는 다음 3가지 물리 유형 중 하나로 동작

## Static (정적)
액터의 **Mobility가 Static인 경우**

- 절대로 움직이지 않음
- 물리 시뮬레이션도 적용되지 않음  
- 세계에 고정된 지형, 벽, 바닥 등  

### 특징
- 성능이 가장 좋음  
- Dynamic 또는 Kinematic이 Static에 충돌하면 Static은 전혀 움직이지 않음

---

## Kinematic (운동학적)
액터의 **Mobility가 Movable이지만, Simulate Physics가 False인 경우**

- **물리 시뮬레이션이나 힘의 영향을 받지 않음**
- 하지만 코드나 블루프린트 노드를 통해 강제로 위치를 옮길 수 있음
- 움직이는 발판, 애니메이션되는 문 등

### 특징
- 스스로 힘·중력을 받지 않고, **프레임마다 사용자(또는 애니메이션)가 위치를 갱신하는 방식**
- Dynamic 바디와 충돌하면 Dynamic 쪽이 반응하고, Kinematic은 영향을 받지 않음

---

## Dynamic (동적)
액터의 **Simulate Physics 속성이 True인 경우**

- 물리 시뮬레이션(중력, 마찰, 질량, 힘)을 받는 완전한 물리 바디  
- 충돌 시 Impulse(충격량), 반사, 마찰 등을 모두 계산함

### 특징
- 가장 자연스러운 물리 반응  
- Force/Impulse/Gravity 적용 가능  
- Kinematic 또는 Static과 부딪히면 Dynamic만 반응함

---

### 정리
**Dynamic이 아닌 객체 (Kinematic/Static)는 물리적으로 ‘절대 밀리지 않는다’**

```
- Dynamic만이 진짜 물리 힘에 의해 움직임
- Kinematic은 충돌은 하지만 물리 반응 계산은 하지 않음
- Static은 위치 변경조차 불가능 (에디터 상에서만 수정)
```

---

# Implicit Velocity (암시적 속도)
UE chaos 물리 엔진은 **한 프레임 동안 객체의 위치가 얼마나 바뀌었는지를 보고 이를 기반으로 캡슐화된 속도(implicit/kinematic velocity) 를 계산**

```
Velocity = (현재 위치 - 이전 위치) / ΔTime
```

> AddActorWorldOffset, SetActorLocation, Sweep 움직임 등으로 물리 엔진을 거치지 않고 직접 위치를 바꾸면
> - Chaos는 내부적으로 “프레임 동안 이렇게 움직였구나”라고 간주하고 속도 처리에 사용

## implicit velocity 적용 대상
1. **Kinematic**
    - 물리 시뮬레이션은 하지 않지만 외부 요인(블루프린트 Move, 애니메이션, spline 이동 등)으로 움직이는 물체
    - Chaos에서 Kinematic velocity 라는 형태로 Implicit Velocity를 저장
2. **Dynamic**
    - 위치를 강제로 바꾸는 경우(teleport 제외)
    - Chaos는 “이동 거리 = 암시적 속도”라 판단하고 다음 충돌 계산에서 사용

---

# offset 노드 (이동 관련 노드)
위치 변경 함수들은 공통적으로 **Sweep / Teleport** 옵션 (체크박스) 을 제공

---

## Sweep
이동 경로 충돌 검사 유무

### Sweep = true
이동 경로를 따라 **충돌을 검사하면서 이동**

- 충돌하면 그 지점에서 멈추거나 히트 정보를 반환  
- 물리적 “사다리 타고 가기, 벽에 걸림” 같은 효과 발생

### Sweep = false
충돌 무시

- 오브젝트가 겹치거나 관통(overlap)해도 그대로 통과  
- Static 메시에 박혀 들어갈 수도 있음  
- CharacterMovementComponent 같은 특수 클래스 제외하면 대부분 이렇게 동작

---

## Teleport
물리 엔진에 **“이동 경로를 전혀 고려하지 않고 즉시 순간 이동해라”**라는 의미

- Teleport는 이동 중 충돌을 고려하지 않음
- 최종 위치에서 겹쳐 있는 상태는 처리할 수 있음

---

### 정리

| 이동 방식 | 충돌 검사 | 특징 |
|---|---|---|
| Sweep=True | O | 벽에 걸림/멈춤. 충돌 인식 |
| Sweep=False | X | 관통 가능. 겹침 허용 |
| Teleport | X | 즉시 위치 이동. 경로 충돌 무시 |

---

##  Add Actor World Offset / Add Actor Local Offset
위치를 직접 덧셈해서 이동시키는 노드

- **물리 기반 이동이 아님**  
- CharacterMovementComponent를 제외한 일반 Actor는 위치를 “강제로” 변경하는 방식

---

# Force vs Impulse
힘과 임펄스의 차이

---

## Add Force
일정 시간에 걸쳐 축적되는 힘  

- 매 프레임 적용할수록 속도가 점진적으로 증가  
- `F = m * a` 에 따라 **가속도(acceleration)** 를 부여
- 예: 바람, 중력, 끌어당김, 에어컨 바람

### 특징

```
- 프레임마다 누적 시 효과가 쌓임  
- “서서히 밀리는” 느낌  
- 질량(mass)에 따라 반응 속도가 달라짐  
- AddForce를 한 번만 호출하면 거의 효과 없음(지속적으로 호출해야 의미 있음)
```

---

## Add Impulse
순간적인 충격

- 아주 짧은 시간 동안 큰 힘을 전달  
- 주로 충돌, 폭발, 총알 피격 등

### 특징

```
- 한 번 호출해도 강렬한 반응  
- 질량에 정확히 비례하여 속도 변화  
- 즉시 순간 속도(velocity)를 변경
- 점프, 폭발 반응 등에 적합
```

---

## 정리
- **Static**: 고정 물체. 물리 반응 없음  
- **Kinematic**: 직접 위치 갱신. 충돌은 하지만 반응 없음  
- **Dynamic**: 완전한 물리 시뮬레이션

```
Dynamic 인 물체의 움직임 표현하기 → Force/Impulse/Velocity

Kinematic 인 물체의 움직임 표현하기 → Offset/Location/Animation
```

> Dynamic도 AddActorWorldOffset로 이동 가능
> - 그 순간엔 사실상 Kinematic처럼 움직이는 것이고, 물리와 수동 이동을 섞는 것은 권장되지 않음

- Sweep 이동: 이동 경로 충돌 검사
- Teleport 이동: 즉시 이동, 경로 무시
- Force: 지속적 압력 → 점진적 속도 변화
- Impulse: 순간 충격 → 즉시 속도 증가

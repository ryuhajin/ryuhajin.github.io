---
layout: default
title: "4. Sky property control"
parent: "Sun, Moon cycle"
nav_order: 4
---

# 4. Sky property control
낮과는 완전히 다른, 차가운 밤하늘(Nighttime Sky) 만들기

---

## Directional Light
빛의 방향은 Rotation만 보고, 위치(Location)는 아무 영향이 없음

```
Pitch(Y 회전): 태양/달의 고도(얼마나 높은지)

Yaw(Z 회전): 방위(동/서/남/북)
```

## Directional Light Property
1. **Intensity (Lux)**
    - 맑은 낮 태양: ~100,000 Lux 
    - 흐린 날 / 그늘: 수천 ~ 수만 Lux
    - 달빛 : 0.1 ~ 1 Lux
2. **Light Color / Use Temperature**
    - Light Color: RGB로 직접 색 지정
    - Use Temperature + Temperature(K): 색 대신 색온도(K)로 지정
        - 색 온도는 높을수록 파란 빛, 낮으면 주황 빛
3. **Source Angle**
    - 라이트 소스 (태양 디스크)의 각도 크기
    - 0 으로 두면 태양 디스크 제거, 그림자가 날카롭게 보임
    - 값이 클 수록 태양 디스크가 더 커지고 그림자가 더 부드럽게 보임
4. **Affects World**
    - 이 라이트가 씬에 전혀 영향을 줄지 여부
5. **Cast Shadows**
    - 그림자 생성 여부
6. **Indirect Lighting Intensity**
    - 간접광(GI, 반사광)에 얼마나 기여할지에 따른 스케일
    - 0 : 간접광 없음
    - 1 : 물리적으로 자연스러운 기본값
    - 1 이상 : 과장, 더 밝고 튐
7. **Volumetric Scattering Intensity**
    - Volumetric Fog에 얼마나 기여할지에 따른 강도
    - 0 : 포그에 전혀 영향 없음
    - 1 : 기본
    - 1 이상 : 강한 빔 연출

---

## Sky Atmosphere
대기라는 매질 안에서 빛이 어떻게 퍼지는지를 파라미터로 조정

## Sky Atmosphere Property
### Planet
1. **Transform Mode**
    - 일반적으로 Planet Top at Absolute World Origin 그대로 사용
        - 월드 원점(0,0,0)을 지면으로 보고 그 위로 대기를 얹는 모드
2. **Ground Radius (km)**
    - 지구 반지름 비슷하게 6360km 근처
    - 값 바꾸면 곡률, 지평선 모양이 바뀜
    - 특별히 SF 행성 만들려는 게 아니면 기본값 유지
3. **Ground Albedo**
    - 지면이 얼마나 밝은 색으로 빛을 반사하는지 (0~1)
    - MultiScattering이 0보다 클 때만 영향
    - 밤 연출용 레벨에서는 0.05~0.1 정도의 어두운 회색 계열로 낮춰서 사용

---

### Atmosphere
1. **Atmosphere Height (km)**
    - 지면 위로 대기가 얼마나 높게 있는지 (대기 두께)
    - 값이 크면 전체적으로 더 많은 공기를 통과 → 안개/헤이즈가 증가하는 느낌
2. **MultiScattering**
    - 빛이 대기에서 여러 번 튕겨서 전체적으로 더 밝고 부드럽게 보이는 효과
    - 낮 : 1.0 근처가 자연스라움
    - 밤 : 0 ~ 0.3 정도로 낮추면 “빛이 덜 퍼져서” 더 어두운 밤 느낌
3. **(고급) Trace Sample Count Scale**
    - 내부 레이마치 샘플 수 스케일
    - 올리면 퀄리티가 높아지지만 비용도 높아짐

---

### Rayleigh
레일리 산란. 작은 공기 분자 산란

1. **Rayleigh Scattering Scale**
    - 공기 분자 규모의 산란. 낮의 파란 하늘, 황혼 색감에 큰 영향
    - **값 ↑**: 파란 하늘, 지평선 부근 색 변화 크게
    - **값 ↓**: 전체적으로 비산란 상태에 가까워져 “우주에 가까운” 느낌
2. **Rayleigh Scattering (색)**
    - RGB 계수. 보통 기본 값이 지구 대기 모델 (파란 하늘)에 맞춰져 있음
3. **Rayleigh Exponential Distribution**
    - 높이에 따라 Rayleigh가 얼마나 빨리 줄어드는지 (km 단위)

---

### Mie
먼지 등 큰 입자 산란, 안개 등

1. **Mie Scattering Scale**
    - 먼지, 에어로졸 등 큰 입자에서 생기는 산란
    - **값 ↑**: 전체가 부옇고, 광원 주변에 후광(halo) 생김. 안개 낀 날/오버캐스트 등에 해당
2. **Mie Scattering (색)**
    - 헤이즈 색감(노란 안개, 푸른 안개 등) 조절 가능
3. **Mie Absorption / Mie Absorption Scale**
    - 빛을 실제로 “먹어버리는” 성분
    - **값 ↑**: 더 어둡고 탁해 보임
4. **Mie Anisotropy**
    - **0**: 모든 방향으로 골고루 산란
    - **1에 가까울수록**: 광원 방향으로 강하게 산란 → 광원 주위에 강한 후광
5. **Mie Exponential Distribution**
    - Mie 효과가 높이에 따라 어느 정도로 줄어드는지 (km 단위)

---

### Absorption
오존층 / 별도 흡수층

1. **Absorption Scale / Absorption**
    - 특정 고도(대략 10~40km 사이)에 존재하는 흡수층(지구의 오존층)을 근사
    - 색을 바꾸면 대기 전체가 그 색을 더 흡수하여 없어지는 방향으로 바뀜
2. **Tent (Tip Altitude / Tip Value / Width)**
    - 어느 고도에서 흡수층이 가장 짙고, 얼마나 두껍게 퍼질지 제어

---

### Art Direction**
1. **Sky Luminance Factor**
    - “하늘 픽셀” 밝기 전체 스케일
    - 밤하늘에서 가장 직접적인 컨트롤러
    - 낮: 1.0 근처
    - 밤: 0.1~0.3 정도로 낮추면 노출이 들어가도 하늘 자체는 어둡게 유지 가능
2. **Aerial Perspective Distance Scale**
    - 카메라에서 먼 물체로 갈수록 대기 안개가 얼마나 두껍게 보일지 스케일링
    - 값이 작을 때 `< 1` : 실제 거리보다 짧은 거리로 간주하여 대기 원근 계산
      - 멀리 있는 산도 상대적으로 또렷해보임
    - 값이 쿨 때 `> 1` : 실제 거리보다 긴 거리고 간주
      - 공기 원근감이 살아남  
3. **Height Fog Contribution**
    - Exponential Height Fog와 결합될 때, Sky Atmosphere의 빛/색이 포그에 얼마나 영향을 주는지 스케일
    - 값이 낮을 때 (0 ~ 1 미만) : 포그 색과 밝기가 자신의 설정 위주
    - 값이 클 때 (1 이상) : 포그가 대기의 색, 밝기를 더 강하게 받음
4. **Transmittance Min Light Elevation Angle**
    - 태양/달이 지평선 아래로 내려가도 어느 정도까지 “지면에 아직 빛이 닿는 것처럼” 보이게 할지 결정
5. **Aerial Perspective Start Depth**
    - 카메라에서 몇 km 이후부터 대기 원근을 계산할지
    - 너무 작으면 가까운 오브젝트도 뿌옇게, 너무 크면 가까운 건 공기감이 사라짐

---


---
layout: default
title: "2. Niagara module"
parent: "Niagara"
nav_order: 2
---

# 2. Niagara module
나이아가라 모듈 훑어보기

- [Unreal Engine 5 Niagara Beginner Tutorial](https://youtu.be/NcJ1ZP7tFUk?si=y5tHFyTSiEl2tegp)

---

# Instance Parameter
파라미터 연계

## Parameter Binding
인풋에 아래 화살표로 되어있는 것들은 모두 Dynamic input 설정이 가능하다

- 예: Random Range, float From Curve

---

## 시스템 인스턴스 파라미터 만들기
1. 이미터 Spawn rate 모듈의 Spawn rate 아래 화살표 클릭
2. **General -> make 카테고리 클릭**
3. **Read form System Parameter 클릭**
4. 나이아가라 그래프 좌측 하단의 parameter에 Spawn 검색
    - system attributes 에 보임
5. 해당 파라미터 system 에 끌고가 부착
    - 시스템에서 해당 이미터의 Spawn rate 값 설정 가능

---

## 사용자 인스턴스 파라미터 만들기
1. 이미터 Spawn rate 모듈의 Spawn rate 아래 화살표 클릭
2. **General -> make 카테고리 클릭**
3. **Read form new User Parameter 클릭**
4. system의 User Parameter에서 세팅 가능
    - parameter 창의 사용자 노출값 (User Parameter)
5. **사용자 파라미터는 에디터 창에서 직접 세팅 가능**

---

## Emitter Summary
자주 사용하는 파라미터 즐겨찾기 기능

1. 즐겨찾기에 추가하고 싶은 input 값 우클릭
2. Show in Emitter Summary 클릭 (다음에 추가 이미터 요약)
3. Emitter Summary (이미터 요약)에 해당 input 추가됨
4. 이미터를 최소화해도 이미터 요약으로 손쉽게 편집 가능

---

# Emitter State
life cycle, scalabilty 설정 (수명과 LOD)

## Life Cycle
system을 따를건지, Self (스스로) 설정 할 것인지 세팅

- Loop 설정
  - 무한
  - 한번만
  - n번 

> life Duration이 2.0 초이고 스폰이 10이라면 1초당 10번 스폰

```
초당 스폰 수 (Spawn Rate) × 수명 (Life Duration) = 동시에 존재하는 파티클 수
``` 

## scalability
라이프 사이클과 마찬가지로 system을 따를건지, Self (스스로) 설정 할 것인지 세팅

> 이펙트 LOD 설정 = scalability

**나중에 깊게 다뤄서 추가하기**

---

# Spawn
스폰 관련 모듈

## Spawn Burst Instantaneous    
1. Spawn Count : 100 일 때, 한번에 파티클 100개 스폰
2. Spawn Time : 2 일때 스폰시간 2초 뒤로 밀림
   - 스폰 시간 설정
   - Track에서 키로 시간 조정 가능
3. Spawn Probability : 스폰 확률 (0~1 사이)
    - 0.5면 50퍼센트로 스폰

## Spawn Particles from Other Emitter
나중에 적음 (고급기술)

## Spawn Per Frame
프레임당 스폰

1. Spawn Count
    - 프레임당 몇개의 파티클을 스폰할지 설정

## Spawn Per Unit
거리당 스폰. 움직여야 파티클 스폰됨

- 주로 무기, 캐릭터 이동 등에 사용

1. Spawn Spacing
    - 스폰 간격. 적을수록 많이 생성

---

## emitter state와 paricle 수명 연계

- 스프링클러 예시

```
이미터(Emitter): 스프링클러 본체

이미터 Duration (2.0초): 스프링클러가 물을 뿌리는 시간. 2.0초 동안만 물을 뿜는다

---

파티클(Particle): 스프링클러에서 나온 개별 물방울

파티클 Life Duration (5.0초): 물방울 하나하나가 바닥에 떨어지거나 증발하기까지 공중에 떠 있는 시간
```

> 2.0초가 되는 순간, 스프링클러(이미터)는 작동을 멈추고 더 이상 새 물방울을 뿌리지 않음
> - 물방울 (파티클) 각각은 수명을 가지고 있기에 이미터가 작동을 멈춰도 존재함

---

# force

1. **Gravity**
    - 파티클에 중력(가속도)을 적용. 끌어당길 축 설정하여 잡아당기기
2. **Curl Noise Force**
    - 컬 노이즈(Curl Noise) 패턴을 따르는 자연스러운 난류 힘을 적용
3. **Drag**
    - 파티클의 속도에 방해되는 저항을 적용
5. **vortex force**
    - 소용돌이(vortex) 축을 중심으로 파티클을 회전시키는 힘을 가함
6. **point attraction force**
    - 특정 포인트로 파티클 모으기. 음수면 더 퍼짐
7. **inherit velocity**
    - 이미터(Emitter)의 현재 속도를 파티클의 초기 속도에 더해줌
    - 이미터가 움직여야 볼 수 있음

---

# Renderer
공통

1. **bindings**
    - "이 파티클의 색깔은 Particles.Color 값을 따르라"
    - "이 파티클의 크기는 Particles.SpriteSize 값을 따르라"
    - 등 명령을 내리고 연결하는 곳 (매개변수 세팅)
2. **Sort Order**
    - 이펙트가 화면에 그려지는 순서 제어
    - view Depth : 카메라에 투영된 깊이 기준 (front - back axis) 파티클 정렬 (원근감이 중요할 때)
    - view distance : 파티클과 뷰 사이의 거리 (직선 거리)를 기준으로 정렬 (실제 공간상 거리가 중요할 때)
    - custom Ascending : 사용자 정의 오름차순 (값이 작을수록 먼저 그려짐 = 작은게 뒤에 있어보임)
    - custom Descending : 사용자 정의 내림차순 (값이 클수록 먼저 그려짐 = 큰게 뒤에 있어보임)

---

## Sprite Renderer
1. **cutout**
    - 깔끔한 가장자리 만들기
    - 사각 표면이 아니라 스프라이트에 맞게 가장자리 잘림

---

## mesh Renderer
메쉬 렌더러의 경우 회전값을 따로 모듈 추가해서 함

### 파티클 스폰
1. **initial mesh orientation**
    - 파티클 스폰할 때 메쉬 회전값 설정

### 파티클 업데이트
1. **static Mesh Size**
    - 메쉬 사이즈 설정
2. **update mesh orientation**
    - 메쉬 회전 설정
    - `-1` 입력 : 무작위 회전
3. **colision**
    - 메쉬 충돌 판정 설정
    - 바운스 등 튀는 횟수 조절 가능

---

## ribbon Renderer
리본의 경우로 따로 모듈 추가

1. **Ribbon Shape**
    - 리본 모양 설정
    - 튜브, 멀티 플랜 등
2. **Tessellation**
    - 곡선 구간을 얼마나 부드럽게 표현할 것인가를 결정
    - 파티클 사이를 보간하는 기술
    - 파티클 스폰 간격이 매우 좁으면 테셀레이션을 과도하게 높이지 않아도 충분히 부드러운 리본을 얻을 수 있다

### 파티클 업데이트
1. **scale Ribbon Width**
    - 리본 너비 확장

---

# Event


---
layout: default
title: "6. 3D Model Scaling, Rotation, Translation"
parent: "ResterTekTutorial"
nav_order: 7
---

# 6. 3D Model Scaling, Rotation, Translation
3D 모델 렌더링 및 크기 조정(Scale), 회전(Rotation), 이동(Translation)

---

## LoadModel
모델 데이터 파싱해서 데이터 읽기

- 모델 구조체

```c++
struct ModelType
{
    float x, y, z;
    float tu, tv; // texture uv
    float nx, ny, nz; // normal x,y,z;
};
```

- 모델 데이터 (파싱할 데이터)

```
Vertex Count: 36

Data:

-1.0  1.0 -1.0 0.0 0.0  0.0  0.0 -1.0
 1.0  1.0 -1.0 1.0 0.0  0.0  0.0 -1.0
-1.0 -1.0 -1.0 0.0 1.0  0.0  0.0 -1.0
-1.0 -1.0 -1.0 0.0 1.0  0.0  0.0 -1.0
 1.0  1.0 -1.0 1.0 0.0  0.0  0.0 -1.0
 1.0 -1.0 -1.0 1.0 1.0  0.0  0.0 -1.0
 1.0  1.0 -1.0 0.0 0.0  1.0  0.0  0.0
 1.0  1.0  1.0 1.0 0.0  1.0  0.0  0.0
 1.0 -1.0 -1.0 0.0 1.0  1.0  0.0  0.0
 1.0 -1.0 -1.0 0.0 1.0  1.0  0.0  0.0
 1.0  1.0  1.0 1.0 0.0  1.0  0.0  0.0
 1.0 -1.0  1.0 1.0 1.0  1.0  0.0  0.0
 1.0  1.0  1.0 0.0 0.0  0.0  0.0  1.0
-1.0  1.0  1.0 1.0 0.0  0.0  0.0  1.0
 1.0 -1.0  1.0 0.0 1.0  0.0  0.0  1.0
 1.0 -1.0  1.0 0.0 1.0  0.0  0.0  1.0
-1.0  1.0  1.0 1.0 0.0  0.0  0.0  1.0
-1.0 -1.0  1.0 1.0 1.0  0.0  0.0  1.0
-1.0  1.0  1.0 0.0 0.0 -1.0  0.0  0.0
-1.0  1.0 -1.0 1.0 0.0 -1.0  0.0  0.0
-1.0 -1.0  1.0 0.0 1.0 -1.0  0.0  0.0
-1.0 -1.0  1.0 0.0 1.0 -1.0  0.0  0.0
-1.0  1.0 -1.0 1.0 0.0 -1.0  0.0  0.0
-1.0 -1.0 -1.0 1.0 1.0 -1.0  0.0  0.0
-1.0  1.0  1.0 0.0 0.0  0.0  1.0  0.0
 1.0  1.0  1.0 1.0 0.0  0.0  1.0  0.0
-1.0  1.0 -1.0 0.0 1.0  0.0  1.0  0.0
-1.0  1.0 -1.0 0.0 1.0  0.0  1.0  0.0
 1.0  1.0  1.0 1.0 0.0  0.0  1.0  0.0
 1.0  1.0 -1.0 1.0 1.0  0.0  1.0  0.0
-1.0 -1.0 -1.0 0.0 0.0  0.0 -1.0  0.0
 1.0 -1.0 -1.0 1.0 0.0  0.0 -1.0  0.0
-1.0 -1.0  1.0 0.0 1.0  0.0 -1.0  0.0
-1.0 -1.0  1.0 0.0 1.0  0.0 -1.0  0.0
 1.0 -1.0 -1.0 1.0 0.0  0.0 -1.0  0.0
 1.0 -1.0  1.0 1.0 1.0  0.0 -1.0  0.0
```

---

## ifstream
'input file stream'의 약자로, C++ 표준 라이브러리(<fstream> 헤더)에 포함된 클래스

- 파일로부터 데이터를 읽어올 때 사용

## read file
1. `ifstream fin;`: `ifstream` 타입의 객체 `fin`을 선언
2. `fin.open(filename);`: `filename`에 해당하는 파일을 열어 `fin` 객체와 연결
3. `if (fin.fail())`: 파일 열기에 실패했는지 확인
4. `fin >> variable;` 또는 `fin.get(char_var);`: 파일에서 데이터를 읽음
- **`>>` 연산자는 공백(스페이스, 탭, 개행)을 무시하고 데이터를 읽음**
-  **`get()` 함수는 한 글자씩(공백 포함) 읽음**
5. `fin.close();`: 파일 사용이 끝나면 닫음

```c++

bool ModelClass::LoadModel(char* filename)
{
	ifstream fin;
	char input;
	int i;

	//모델 파일 열기
	fin.open(filename);

	// 파일 열기 실패시 exit
	if (fin.fail())
	{
		return false;
	}

	// 정점 개수의 값까지 읽기
	fin.get(input);
	while (input != ':')
	{
		fin.get(input);
	}

	// 버텍스 카운트 읽기
	fin >> m_vertexCount;

	// 인덱스 개수를 정점 개수와 동일하게 설정
	m_indexCount = m_vertexCount;

	// 읽은 버텍스 카운트를 사용해 모델 생성
	m_model = new ModelType[m_vertexCount];

	// 데이터의 시작 부분까지 읽기
	fin.get(input);
	while (input != ':')
	{
		fin.get(input);
	}
	fin.get(input);
	fin.get(input);

	for (i = 0; i < m_vertexCount; i++)
	{
		fin >> m_model[i].x >> m_model[i].y >> m_model[i].z;
		fin >> m_model[i].tu >> m_model[i].tv;
		fin >> m_model[i].nx >> m_model[i].ny >> m_model[i].nz;
	}

	// Close the model file.
	fin.close();

	return true;
}
```

- **fin.get(input)**
  - 함수는 파일 스트림에서 **단 한 개의 문자(character)**를 읽어서 변수 `input`에 저장
- **`>>`** 연산자
  - 스페이스, 탭, 개행 문자와 같은 공백 문자는 패스함

---

